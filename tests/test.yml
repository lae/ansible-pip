---
- hosts: pip
  tasks:
    - name: Determine pip version
      shell: "pip show pip | awk '/^Version:/ {print $2}'"
      register: pip_version_result
    - assert:
        that:
          - "pip_version_result.stdout | regex_search('^9.0.[0-9]+')"
    - name: install requests
      pip:
        name: requests
